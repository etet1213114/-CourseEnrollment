/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css                 *//* empty css                *//* empty css                     *//* empty css              */import{r as c}from"./request-585909c7.js";import{r as A,o as b,c as y,d as g,e as t,w as o,E as d,p as J,s as O,C as $,D as q,G as M,m as i,F as G,A as H,H as L,I as j,J as K,n as Q,q as R,v as W,x as X,l as Y,g as Z}from"./index-445d3c97.js";const ee={class:"card",style:{"margin-bottom":"5px"}},le={class:"card"},te={style:{"margin-bottom":"10px"}},ae={class:"card"},oe={class:"dialog-footer"},ye={__name:"Teacher",setup(re){const V="http://:9091/files/upload",e=A({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:5,total:0,name:null,specialityData:[]}),m=()=>{c.get("/teacher/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(r=>{var l,n;r.code==="200"?(e.tableData=(l=r.data)==null?void 0:l.list,e.total=(n=r.data)==null?void 0:n.total):d.error(r.msg)})},v=r=>{e.pageNum=r,m()},x=()=>{e.form={},e.formVisible=!0},E=r=>{e.form=JSON.parse(JSON.stringify(r)),e.formVisible=!0},k=r=>{L.confirm("刪除後數據無法恢復，您確定刪除嗎?","刪除確認",{type:"warning"}).then(l=>{c.delete("/teacher/deleteById/"+r).then(n=>{n.code==="200"?(d.success("操作成功"),m()):d.error(n.msg)})}).catch(l=>{})},C=()=>{c.post("/teacher/add",e.form).then(r=>{r.code==="200"?(d.success("操作成功"),e.formVisible=!1,m()):d.error(r.msg)})},w=()=>{c.put("/teacher/update",e.form).then(r=>{r.code==="200"?(d.success("操作成功"),e.formVisible=!1,m()):d.error(r.msg)})},N=()=>{e.form.id?w():C()},S=()=>{e.name=null,m()},U=r=>{e.form.avatar=r.data},D=()=>{c.get("/speciality/selectAll").then(r=>{r.code==="200"?e.specialityData=r.data:d.error(r.msg)})};return m(),D(),(r,l)=>{const n=J,s=O,p=j,I=K,z=$,h=q,B=Q,u=R,f=W,_=X,F=Y,P=M;return b(),y("div",null,[g("div",ee,[t(n,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=a=>e.name=a),style:{width:"300px","margin-right":"10px"},placeholder:"請輸入教師姓名"},null,8,["modelValue"]),t(s,{type:"primary",onClick:m},{default:o(()=>l[10]||(l[10]=[i("查詢")])),_:1}),t(s,{type:"info",onClick:S},{default:o(()=>l[11]||(l[11]=[i("重置")])),_:1})]),g("div",le,[g("div",te,[t(s,{type:"primary",onClick:x},{default:o(()=>l[12]||(l[12]=[i("新增")])),_:1})]),t(z,{data:e.tableData,stripe:""},{default:o(()=>[t(p,{label:"用戶名",prop:"username"}),t(p,{label:"頭像",prop:"avatar"},{default:o(a=>[t(I,{src:a.row.avatar,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])]),_:1}),t(p,{label:"名稱",prop:"name"}),t(p,{label:"性別",prop:"sex"}),t(p,{label:"職稱",prop:"title"}),t(p,{label:"所屬專業",prop:"specialityName"}),t(p,{label:"角色",prop:"role"}),t(p,{label:"操作",align:"center",width:"160"},{default:o(a=>[t(s,{type:"primary",onClick:T=>E(a.row)},{default:o(()=>l[13]||(l[13]=[i("編輯")])),_:2},1032,["onClick"]),t(s,{type:"danger",onClick:T=>k(a.row.id)},{default:o(()=>l[14]||(l[14]=[i("刪除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),g("div",ae,[t(h,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":l[1]||(l[1]=a=>e.pageSize=a),"current-page":e.pageNum,"onUpdate:currentPage":l[2]||(l[2]=a=>e.pageNum=a),total:e.total,onCurrentChange:v},null,8,["page-size","current-page","total"])]),t(P,{title:"教師信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":l[9]||(l[9]=a=>e.formVisible=a),"close-on-click-modal":!1,"destroy-on-close":""},{footer:o(()=>[g("span",oe,[t(s,{onClick:l[8]||(l[8]=a=>e.formVisible=!1)},{default:o(()=>l[16]||(l[16]=[i("取 消")])),_:1}),t(s,{type:"primary",onClick:N},{default:o(()=>l[17]||(l[17]=[i("保 存")])),_:1})])]),default:o(()=>[t(F,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:o(()=>[t(u,{label:"頭像",prop:"avatar"},{default:o(()=>[t(B,{action:V,"list-type":"picture","on-success":U},{default:o(()=>[t(s,{type:"primary"},{default:o(()=>l[15]||(l[15]=[i("上傳圖片")])),_:1})]),_:1})]),_:1}),t(u,{label:"賬號",prop:"username"},{default:o(()=>[t(n,{modelValue:e.form.username,"onUpdate:modelValue":l[3]||(l[3]=a=>e.form.username=a),autocomplete:"off",placeholder:"請輸入賬號"},null,8,["modelValue"])]),_:1}),t(u,{label:"姓名",prop:"name"},{default:o(()=>[t(n,{modelValue:e.form.name,"onUpdate:modelValue":l[4]||(l[4]=a=>e.form.name=a),autocomplete:"off",placeholder:"請輸入姓名"},null,8,["modelValue"])]),_:1}),t(u,{label:"性別",prop:"sex"},{default:o(()=>[t(_,{modelValue:e.form.sex,"onUpdate:modelValue":l[5]||(l[5]=a=>e.form.sex=a),placeholder:"請選擇性別",style:{width:"100%"}},{default:o(()=>[t(f,{label:"男",value:"男"}),t(f,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"職稱",prop:"title"},{default:o(()=>[t(_,{modelValue:e.form.title,"onUpdate:modelValue":l[6]||(l[6]=a=>e.form.title=a),placeholder:"請選擇職稱",style:{width:"100%"}},{default:o(()=>[t(f,{label:"講師",value:"講師"}),t(f,{label:"副教授",value:"副教授"}),t(f,{label:"教授",value:"教授"})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"所屬專業",prop:"specialityId"},{default:o(()=>[t(_,{modelValue:e.form.specialityId,"onUpdate:modelValue":l[7]||(l[7]=a=>e.form.specialityId=a),placeholder:"請選擇專業"},{default:o(()=>[(b(!0),y(G,null,H(e.specialityData,a=>(b(),Z(f,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{ye as default};
