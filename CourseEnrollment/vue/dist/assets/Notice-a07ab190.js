/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{r as f}from"./request-585909c7.js";import{r as z,o as S,c as B,d,e as o,w as a,p as D,s as U,C as I,D as P,G as T,m as r,H as $,E as p,I as q,q as F,l as J}from"./index-445d3c97.js";const M={class:"card",style:{"margin-bottom":"5px"}},O={class:"card",style:{"margin-bottom":"5px"}},A={style:{"margin-bottom":"10px"}},G={class:"card"},H={class:"dialog-footer"},te={__name:"Notice",setup(j){const t=z({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],title:null}),m=()=>{f.get("/notice/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,title:t.title}}).then(n=>{var e,i;t.tableData=(e=n.data)==null?void 0:e.list,t.total=(i=n.data)==null?void 0:i.total})},c=()=>{t.form={},t.formVisible=!0},_=n=>{t.form=JSON.parse(JSON.stringify(n)),t.formVisible=!0},b=()=>{f.post("/notice/add",t.form).then(n=>{n.code==="200"?(m(),p.success("操作成功"),t.formVisible=!1):p.error(n.msg)})},V=()=>{f.put("/notice/update",t.form).then(n=>{n.code==="200"?(m(),p.success("操作成功"),t.formVisible=!1):p.error(n.msg)})},y=()=>{t.form.id?V():b()},x=n=>{$.confirm("刪除後資料無法恢復，您確定刪除嗎?","刪除確認",{type:"warning"}).then(e=>{f.delete("/notice/deleteById/"+n).then(i=>{i.code==="200"?(m(),p.success("操作成功")):p.error(i.msg)})}).catch(e=>{})},k=()=>{t.title=null,m()};return m(),(n,e)=>{const i=D,s=U,u=q,E=I,C=P,g=F,v=J,N=T;return S(),B("div",null,[d("div",M,[o(i,{modelValue:t.title,"onUpdate:modelValue":e[0]||(e[0]=l=>t.title=l),style:{width:"300px","margin-right":"10px"},placeholder:"請輸入標題查詢"},null,8,["modelValue"]),o(s,{type:"primary",onClick:m},{default:a(()=>e[7]||(e[7]=[r("查詢")])),_:1}),o(s,{type:"info",style:{margin:"0 10px"},onClick:k},{default:a(()=>e[8]||(e[8]=[r("重置")])),_:1})]),d("div",O,[d("div",A,[o(s,{type:"primary",onClick:c},{default:a(()=>e[9]||(e[9]=[r("新增")])),_:1})]),o(E,{data:t.tableData,stripe:""},{default:a(()=>[o(u,{label:"公告標題",prop:"title"}),o(u,{label:"公告內容",prop:"content"}),o(u,{label:"發布時間",prop:"time"}),o(u,{label:"操作",align:"center",width:"160"},{default:a(l=>[o(s,{type:"primary",onClick:w=>_(l.row)},{default:a(()=>e[10]||(e[10]=[r("編輯")])),_:2},1032,["onClick"]),o(s,{type:"danger",onClick:w=>x(l.row.id)},{default:a(()=>e[11]||(e[11]=[r("刪除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),d("div",G,[o(C,{background:"",layout:"prev, pager, next","page-size":t.pageSize,"onUpdate:pageSize":e[1]||(e[1]=l=>t.pageSize=l),"current-page":t.pageNum,"onUpdate:currentPage":e[2]||(e[2]=l=>t.pageNum=l),total:t.total},null,8,["page-size","current-page","total"])]),o(N,{title:"信息",width:"40%",modelValue:t.formVisible,"onUpdate:modelValue":e[6]||(e[6]=l=>t.formVisible=l),"close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[d("span",H,[o(s,{onClick:e[5]||(e[5]=l=>t.formVisible=!1)},{default:a(()=>e[12]||(e[12]=[r("取 消")])),_:1}),o(s,{type:"primary",onClick:y},{default:a(()=>e[13]||(e[13]=[r("保 存")])),_:1})])]),default:a(()=>[o(v,{model:t.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:a(()=>[o(g,{label:"公告標題",prop:"title"},{default:a(()=>[o(i,{modelValue:t.form.title,"onUpdate:modelValue":e[3]||(e[3]=l=>t.form.title=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(g,{label:"公告內容",prop:"content"},{default:a(()=>[o(i,{type:"textarea",rows:4,modelValue:t.form.content,"onUpdate:modelValue":e[4]||(e[4]=l=>t.form.content=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{te as default};
