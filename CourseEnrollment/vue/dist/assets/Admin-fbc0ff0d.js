/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css                 *//* empty css               *//* empty css               *//* empty css                *//* empty css                     *//* empty css              */import{r as f}from"./request-585909c7.js";import{r as A,o as c,c as _,d as u,e as o,w as l,p as J,s as M,C as P,D as T,G as $,m,h as q,H as F,E as d,I as O,J as G,n as H,q as h,l as j}from"./index-445d3c97.js";const K={class:"card",style:{"margin-bottom":"5px"}},L={class:"card",style:{"margin-bottom":"5px"}},Q={style:{"margin-bottom":"10px"}},R={key:0},W={class:"card"},X={class:"dialog-footer"},pe={__name:"Admin",setup(Y){const b="http://:9091/files/upload",t=A({pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],name:null}),i=()=>{f.get("/admin/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,name:t.name}}).then(n=>{var e,s;t.tableData=(e=n.data)==null?void 0:e.list,t.total=(s=n.data)==null?void 0:s.total})},y=()=>{t.form={},t.formVisible=!0},V=n=>{t.form=JSON.parse(JSON.stringify(n)),t.formVisible=!0},x=()=>{f.post("/admin/add",t.form).then(n=>{n.code==="200"?(i(),d.success("操作成功"),t.formVisible=!1):d.error(n.msg)})},E=()=>{f.put("/admin/update",t.form).then(n=>{n.code==="200"?(i(),d.success("操作成功"),t.formVisible=!1):d.error(n.msg)})},k=()=>{t.form.id?E():x()},v=n=>{F.confirm("刪除後資料無法恢復，是否確定刪除?","刪除確認",{type:"warning"}).then(e=>{f.delete("/admin/delete/"+n).then(s=>{s.code==="200"?(i(),d.success("操作成功")):d.error(s.msg)})}).catch(e=>{})},C=()=>{t.name=null,i()},w=n=>{t.form.avatar=n.data};return i(),(n,e)=>{const s=J,r=M,p=O,N=G,S=P,z=T,U=H,g=h,D=j,I=$;return c(),_("div",null,[u("div",K,[o(s,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.name=a),style:{width:"300px","margin-right":"10px"},placeholder:"請輸入名稱查詢"},null,8,["modelValue"]),o(r,{type:"primary",onClick:i},{default:l(()=>e[7]||(e[7]=[m("查詢")])),_:1}),o(r,{type:"info",style:{margin:"0 10px"},onClick:C},{default:l(()=>e[8]||(e[8]=[m("重置")])),_:1})]),u("div",L,[u("div",Q,[o(r,{type:"primary",onClick:y},{default:l(()=>e[9]||(e[9]=[m("新增")])),_:1})]),o(S,{data:t.tableData,stripe:""},{default:l(()=>[o(p,{label:"用戶名",prop:"username"}),o(p,{label:"名稱",prop:"name"}),o(p,{label:"頭貼"},{default:l(a=>[o(N,{src:a.row.avatar,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])]),_:1}),o(p,{label:"角色",prop:"role"},{default:l(a=>[a.row.role==="ADMIN"?(c(),_("span",R,"管理員")):q("",!0)]),_:1}),o(p,{label:"操作",align:"center",width:"160"},{default:l(a=>[o(r,{type:"primary",onClick:B=>V(a.row)},{default:l(()=>e[10]||(e[10]=[m("編輯")])),_:2},1032,["onClick"]),o(r,{type:"danger",onClick:B=>v(a.row.id)},{default:l(()=>e[11]||(e[11]=[m("刪除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",W,[o(z,{background:"",layout:"prev, pager, next","page-size":t.pageSize,"onUpdate:pageSize":e[1]||(e[1]=a=>t.pageSize=a),"current-page":t.pageNum,"onUpdate:currentPage":e[2]||(e[2]=a=>t.pageNum=a),total:t.total},null,8,["page-size","current-page","total"])]),o(I,{title:"信息",width:"40%",modelValue:t.formVisible,"onUpdate:modelValue":e[6]||(e[6]=a=>t.formVisible=a),"close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[u("span",X,[o(r,{onClick:e[5]||(e[5]=a=>t.formVisible=!1)},{default:l(()=>e[13]||(e[13]=[m("取 消")])),_:1}),o(r,{type:"primary",onClick:k},{default:l(()=>e[14]||(e[14]=[m("保 存")])),_:1})])]),default:l(()=>[o(D,{model:t.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:l(()=>[o(g,{label:"頭像",prop:"avatar"},{default:l(()=>[o(U,{action:b,"list-type":"picture","on-success":w},{default:l(()=>[o(r,{type:"primary"},{default:l(()=>e[12]||(e[12]=[m("上傳圖片")])),_:1})]),_:1})]),_:1}),o(g,{label:"帳號",prop:"username"},{default:l(()=>[o(s,{modelValue:t.form.username,"onUpdate:modelValue":e[3]||(e[3]=a=>t.form.username=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(g,{label:"名稱",prop:"name"},{default:l(()=>[o(s,{modelValue:t.form.name,"onUpdate:modelValue":e[4]||(e[4]=a=>t.form.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{pe as default};
