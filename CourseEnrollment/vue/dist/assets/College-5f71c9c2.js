/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{r as u}from"./request-585909c7.js";import{r as B,o as c,c as b,d as f,e as t,w as a,h as _,p as I,s as U,C as M,D as A,G as J,m,g as O,H as P,E as d,I as T,q as $,l as q}from"./index-445d3c97.js";const F={class:"card",style:{"margin-bottom":"5px"}},G={class:"card",style:{"margin-bottom":"5px"}},H={key:0,style:{"margin-bottom":"10px"}},j={class:"card"},K={class:"dialog-footer"},le={__name:"College",setup(L){const e=B({user:JSON.parse(localStorage.getItem("system-user")||"{}"),pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],name:null}),i=()=>{u.get("/college/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(n=>{var o,r;e.tableData=(o=n.data)==null?void 0:o.list,e.total=(r=n.data)==null?void 0:r.total})},V=()=>{e.form={},e.formVisible=!0},y=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},k=()=>{u.post("/college/add",e.form).then(n=>{n.code==="200"?(i(),d.success("操作成功"),e.formVisible=!1):d.error(n.msg)})},x=()=>{u.put("/college/update",e.form).then(n=>{n.code==="200"?(i(),d.success("操作成功"),e.formVisible=!1):d.error(n.msg)})},C=()=>{e.form.id?x():k()},N=n=>{P.confirm("刪除後資料無法恢復，您確定刪除嗎?","刪除確認",{type:"warning"}).then(o=>{u.delete("/college/deleteById/"+n).then(r=>{r.code==="200"?(i(),d.success("操作成功")):d.error(r.msg)})}).catch(o=>{})},E=()=>{e.name=null,i()};return i(),(n,o)=>{const r=I,s=U,p=T,v=M,w=A,g=$,S=q,z=J;return c(),b("div",null,[f("div",F,[t(r,{modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.name=l),style:{width:"300px","margin-right":"10px"},placeholder:"請輸入學院名稱查詢"},null,8,["modelValue"]),t(s,{type:"primary",onClick:i},{default:a(()=>o[8]||(o[8]=[m("查詢")])),_:1}),t(s,{type:"info",style:{margin:"0 10px"},onClick:E},{default:a(()=>o[9]||(o[9]=[m("重置")])),_:1})]),f("div",G,[e.user.role==="ADMIN"?(c(),b("div",H,[t(s,{type:"primary",onClick:V},{default:a(()=>o[10]||(o[10]=[m("新增")])),_:1})])):_("",!0),t(v,{data:e.tableData,stripe:""},{default:a(()=>[t(p,{label:"學院名稱",prop:"name"}),t(p,{label:"學院介紹",prop:"content"}),t(p,{label:"最低學分",prop:"score"}),e.user.role==="ADMIN"?(c(),O(p,{key:0,label:"操作",align:"center",width:"160"},{default:a(l=>[t(s,{type:"primary",onClick:D=>y(l.row)},{default:a(()=>o[11]||(o[11]=[m("編輯")])),_:2},1032,["onClick"]),t(s,{type:"danger",onClick:D=>N(l.row.id)},{default:a(()=>o[12]||(o[12]=[m("刪除")])),_:2},1032,["onClick"])]),_:1})):_("",!0)]),_:1},8,["data"])]),f("div",j,[t(w,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":o[1]||(o[1]=l=>e.pageSize=l),"current-page":e.pageNum,"onUpdate:currentPage":o[2]||(o[2]=l=>e.pageNum=l),total:e.total},null,8,["page-size","current-page","total"])]),t(z,{title:"學院信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":o[7]||(o[7]=l=>e.formVisible=l),"close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[f("span",K,[t(s,{onClick:o[6]||(o[6]=l=>e.formVisible=!1)},{default:a(()=>o[13]||(o[13]=[m("取 消")])),_:1}),t(s,{type:"primary",onClick:C},{default:a(()=>o[14]||(o[14]=[m("保 存")])),_:1})])]),default:a(()=>[t(S,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:a(()=>[t(g,{label:"學院名稱",prop:"name"},{default:a(()=>[t(r,{modelValue:e.form.name,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(g,{label:"學院介紹",prop:"content"},{default:a(()=>[t(r,{type:"textarea",rows:4,modelValue:e.form.content,"onUpdate:modelValue":o[4]||(o[4]=l=>e.form.content=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(g,{label:"最低學分",prop:"score"},{default:a(()=>[t(r,{modelValue:e.form.score,"onUpdate:modelValue":o[5]||(o[5]=l=>e.form.score=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{le as default};
