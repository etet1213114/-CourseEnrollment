/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{r as p}from"./request-585909c7.js";import{r as F,o as u,c,d as g,e as o,w as n,h as y,E as i,p as M,s as O,C as J,D as P,G as T,m,g as b,F as $,A as q,H as G,I as H,q as L,x as j,l as K,v as Q}from"./index-445d3c97.js";const R={class:"card",style:{"margin-bottom":"5px"}},W={class:"card",style:{"margin-bottom":"5px"}},X={key:0,style:{"margin-bottom":"10px"}},Y={class:"card"},Z={class:"dialog-footer"},de={__name:"Speciality",setup(h){const e=F({user:JSON.parse(localStorage.getItem("system-user")||"{}"),pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},tableData:[],name:null,collegeData:[]}),d=()=>{p.get("/speciality/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(a=>{var t,s;e.tableData=(t=a.data)==null?void 0:t.list,e.total=(s=a.data)==null?void 0:s.total})},V=()=>{e.form={},e.formVisible=!0},k=a=>{e.form=JSON.parse(JSON.stringify(a)),e.formVisible=!0},x=()=>{p.post("/speciality/add",e.form).then(a=>{a.code==="200"?(d(),i.success("操作成功"),e.formVisible=!1):i.error(a.msg)})},E=()=>{p.put("/speciality/update",e.form).then(a=>{a.code==="200"?(d(),i.success("操作成功"),e.formVisible=!1):i.error(a.msg)})},N=()=>{e.form.id?E():x()},v=a=>{G.confirm("刪除後資料無法恢復，您確定刪除嗎?","刪除確認",{type:"warning"}).then(t=>{p.delete("/speciality/deleteById/"+a).then(s=>{s.code==="200"?(d(),i.success("操作成功")):i.error(s.msg)})}).catch(t=>{})},C=()=>{e.name=null,d()},S=()=>{p.get("/college/selectAll").then(a=>{a.code==="200"?e.collegeData=a.data:i.error(a.msg)})};return d(),S(),(a,t)=>{const s=M,r=O,f=H,D=J,w=P,_=L,I=Q,z=j,B=K,U=T;return u(),c("div",null,[g("div",R,[o(s,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.name=l),style:{width:"300px","margin-right":"10px"},placeholder:"請輸入專業名稱查詢"},null,8,["modelValue"]),o(r,{type:"primary",onClick:d},{default:n(()=>t[7]||(t[7]=[m("查詢")])),_:1}),o(r,{type:"info",style:{margin:"0 10px"},onClick:C},{default:n(()=>t[8]||(t[8]=[m("重置")])),_:1})]),g("div",W,[e.user.role==="ADMIN"?(u(),c("div",X,[o(r,{type:"primary",onClick:V},{default:n(()=>t[9]||(t[9]=[m("新增")])),_:1})])):y("",!0),o(D,{data:e.tableData,stripe:""},{default:n(()=>[o(f,{label:"專業名稱",prop:"name"}),o(f,{label:"所屬學院",prop:"collegeName"}),e.user.role==="ADMIN"?(u(),b(f,{key:0,label:"操作",align:"center",width:"160"},{default:n(l=>[o(r,{type:"primary",onClick:A=>k(l.row)},{default:n(()=>t[10]||(t[10]=[m("編輯")])),_:2},1032,["onClick"]),o(r,{type:"danger",onClick:A=>v(l.row.id)},{default:n(()=>t[11]||(t[11]=[m("刪除")])),_:2},1032,["onClick"])]),_:1})):y("",!0)]),_:1},8,["data"])]),g("div",Y,[o(w,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":t[1]||(t[1]=l=>e.pageSize=l),"current-page":e.pageNum,"onUpdate:currentPage":t[2]||(t[2]=l=>e.pageNum=l),total:e.total},null,8,["page-size","current-page","total"])]),o(U,{title:"專業信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":t[6]||(t[6]=l=>e.formVisible=l),"close-on-click-modal":!1,"destroy-on-close":""},{footer:n(()=>[g("span",Z,[o(r,{onClick:t[5]||(t[5]=l=>e.formVisible=!1)},{default:n(()=>t[12]||(t[12]=[m("取 消")])),_:1}),o(r,{type:"primary",onClick:N},{default:n(()=>t[13]||(t[13]=[m("保 存")])),_:1})])]),default:n(()=>[o(B,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:n(()=>[o(_,{label:"專業名稱",prop:"name"},{default:n(()=>[o(s,{modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(_,{label:"所屬學院",prop:"content"},{default:n(()=>[o(z,{modelValue:e.form.collegeId,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.collegeId=l),placeholder:"請選擇學院"},{default:n(()=>[(u(!0),c($,null,q(e.collegeData,l=>(u(),b(I,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{de as default};
