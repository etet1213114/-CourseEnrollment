/* empty css                *//* empty css               *//* empty css                    *//* empty css                  *//* empty css               *//* empty css               *//* empty css                 *//* empty css                *//* empty css                     *//* empty css              */import{r as f}from"./request-585909c7.js";import{r as O,o as _,c as V,d as g,e as o,w as n,E as p,p as T,s as $,C as q,D as M,G as h,m,F as G,A as H,H as L,I as j,J as K,n as Q,q as R,v as W,x as X,l as Y,g as Z}from"./index-445d3c97.js";const ee={class:"card",style:{"margin-bottom":"5px"}},le={class:"card"},oe={style:{"margin-bottom":"10px"}},te={class:"card"},ae={class:"dialog-footer"},Ve={__name:"Student",setup(ne){const y="http://:9091/files/upload",e=O({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:5,total:0,name:null,collegeData:[]}),i=()=>{f.get("/student/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(a=>{var l,r;a.code==="200"?(e.tableData=(l=a.data)==null?void 0:l.list,e.total=(r=a.data)==null?void 0:r.total):p.error(a.msg)})},v=a=>{e.pageNum=a,i()},x=()=>{e.form={},e.formVisible=!0},E=a=>{e.form=JSON.parse(JSON.stringify(a)),e.formVisible=!0},k=a=>{L.confirm("刪除後數據無法恢復，您確定刪除嗎?","刪除確認",{type:"warning"}).then(l=>{f.delete("/student/deleteById/"+a).then(r=>{r.code==="200"?(p.success("操作成功"),i()):p.error(r.msg)})}).catch(l=>{})},C=()=>{f.post("/student/add",e.form).then(a=>{a.code==="200"?(p.success("操作成功"),e.formVisible=!1,i()):p.error(a.msg)})},w=()=>{f.put("/student/update",e.form).then(a=>{a.code==="200"?(p.success("操作成功"),e.formVisible=!1,i()):p.error(a.msg)})},N=()=>{e.form.id?w():C()},S=()=>{e.name=null,i()},U=a=>{e.form.avatar=a.data},D=()=>{f.get("/college/selectAll").then(a=>{a.code==="200"?e.collegeData=a.data:p.error(a.msg)})};return i(),D(),(a,l)=>{const r=T,d=$,s=j,I=K,z=q,B=M,F=Q,u=R,c=W,b=X,P=Y,A=h;return _(),V("div",null,[g("div",ee,[o(r,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.name=t),style:{width:"300px","margin-right":"10px"},placeholder:"請輸入學生姓名"},null,8,["modelValue"]),o(d,{type:"primary",onClick:i},{default:n(()=>l[10]||(l[10]=[m("查詢")])),_:1}),o(d,{type:"info",onClick:S},{default:n(()=>l[11]||(l[11]=[m("重置")])),_:1})]),g("div",le,[g("div",oe,[o(d,{type:"primary",onClick:x},{default:n(()=>l[12]||(l[12]=[m("新增")])),_:1})]),o(z,{data:e.tableData,stripe:""},{default:n(()=>[o(s,{label:"用戶名",prop:"username"}),o(s,{label:"頭像",prop:"avatar"},{default:n(t=>[o(I,{src:t.row.avatar,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])]),_:1}),o(s,{label:"名稱",prop:"name"}),o(s,{label:"性別",prop:"sex"}),o(s,{label:"學號",prop:"code"}),o(s,{label:"學分",prop:"score"}),o(s,{label:"所屬學院",prop:"collegeName"}),o(s,{label:"角色",prop:"role"}),o(s,{label:"操作",align:"center",width:"160"},{default:n(t=>[o(d,{type:"primary",onClick:J=>E(t.row)},{default:n(()=>l[13]||(l[13]=[m("編輯")])),_:2},1032,["onClick"]),o(d,{type:"danger",onClick:J=>k(t.row.id)},{default:n(()=>l[14]||(l[14]=[m("刪除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),g("div",te,[o(B,{background:"",layout:"prev, pager, next","page-size":e.pageSize,"onUpdate:pageSize":l[1]||(l[1]=t=>e.pageSize=t),"current-page":e.pageNum,"onUpdate:currentPage":l[2]||(l[2]=t=>e.pageNum=t),total:e.total,onCurrentChange:v},null,8,["page-size","current-page","total"])]),o(A,{title:"教師信息",width:"40%",modelValue:e.formVisible,"onUpdate:modelValue":l[9]||(l[9]=t=>e.formVisible=t),"close-on-click-modal":!1,"destroy-on-close":""},{footer:n(()=>[g("span",ae,[o(d,{onClick:l[8]||(l[8]=t=>e.formVisible=!1)},{default:n(()=>l[16]||(l[16]=[m("取 消")])),_:1}),o(d,{type:"primary",onClick:N},{default:n(()=>l[17]||(l[17]=[m("保 存")])),_:1})])]),default:n(()=>[o(P,{model:e.form,"label-width":"100px",style:{"padding-right":"50px"}},{default:n(()=>[o(u,{label:"頭像",prop:"avatar"},{default:n(()=>[o(F,{action:y,"list-type":"picture","on-success":U},{default:n(()=>[o(d,{type:"primary"},{default:n(()=>l[15]||(l[15]=[m("上傳圖片")])),_:1})]),_:1})]),_:1}),o(u,{label:"帳號",prop:"username"},{default:n(()=>[o(r,{modelValue:e.form.username,"onUpdate:modelValue":l[3]||(l[3]=t=>e.form.username=t),autocomplete:"off",placeholder:"請輸入帳號"},null,8,["modelValue"])]),_:1}),o(u,{label:"姓名",prop:"name"},{default:n(()=>[o(r,{modelValue:e.form.name,"onUpdate:modelValue":l[4]||(l[4]=t=>e.form.name=t),autocomplete:"off",placeholder:"請輸入姓名"},null,8,["modelValue"])]),_:1}),o(u,{label:"性別",prop:"sex"},{default:n(()=>[o(b,{modelValue:e.form.sex,"onUpdate:modelValue":l[5]||(l[5]=t=>e.form.sex=t),placeholder:"請選擇性別",style:{width:"100%"}},{default:n(()=>[o(c,{label:"男",value:"男"}),o(c,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"學號",prop:"code"},{default:n(()=>[o(r,{modelValue:e.form.code,"onUpdate:modelValue":l[6]||(l[6]=t=>e.form.code=t),autocomplete:"off",placeholder:"請輸入學號"},null,8,["modelValue"])]),_:1}),o(u,{label:"所屬學院",prop:"collegeId"},{default:n(()=>[o(b,{modelValue:e.form.collegeId,"onUpdate:modelValue":l[7]||(l[7]=t=>e.form.collegeId=t),placeholder:"請選擇學院"},{default:n(()=>[(_(!0),V(G,null,H(e.collegeData,t=>(_(),Z(c,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{Ve as default};
